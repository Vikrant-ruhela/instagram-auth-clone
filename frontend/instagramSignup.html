<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login page</title>
    <link rel="shortcut icon" href="#">
    <link rel="stylesheet" href="./login.css">
    <style>
        .mainSection {
            height: 80%;
        }
    </style>
</head>

<body>
    <div class="mainSection">
        <h1>Instagram SignUp</h1>
        <form>
            <label name="name">Name</label>
            <input type="text" placeholder="enter name" required="true" id="name">
            <label name="username">Username</label>
            <input type="text" placeholder="enter username" required="true" id="username">
            <label name="email">Email</label>
            <input type="email" placeholder="enter email" required="true" id="email">
            <label name="password">Password</label>
            <input type="password" placeholder="enter password" id="password" autocomplete="off">
            <label name="bio">Bio</label>
            <input type="text" placeholder="enter bio" id="bio">
            <button id="signup" type="submit">SignIn</button>
        </form>
        <div class="extraFeatures">
            <a href="#">
                <p>Forgot Password ?</p>
            </a>
            <a href="#">
                <p>Log In</p>
            </a>
        </div>
    </div>

    <script>
        document.getElementById("signup").addEventListener("click", userSignup)
        async function userSignup(event) {
            event.preventDefault()
            const name = document.getElementById("name").value
            const username = document.getElementById("username").value
            const email = document.getElementById("email").value
            const password = document.getElementById("password").value
            const bio = document.getElementById("bio").value

            const resp = await fetch("http://127.0.0.1:3000/signup", {
                method: "POST",
                credentials: 'include',
                redirect: 'follow',
                headers: { "content-type": "application/json" },
                body: JSON.stringify({ name: name, username: username, email: email, password: password, bio: bio })
            })

            const data = await resp.json();
            console.log(data.message)

            window.location.href = "http://127.0.0.1:5501/frontend/index.html";
        }
    </script>
</body>

</html>